import{getDefaultOptions as e}from"./_lib/defaultOptions.js";import{formatters as t}from"./_lib/format/formatters.js";import{longFormatters as o}from"./_lib/format/longFormatters.js";import{isProtectedWeekYearToken as r,isProtectedDayOfYearToken as a,warnOrThrowProtectedError as n}from"./_lib/protectedTokens.js";import{isValid as i}from"./isValid.js";import{toDate as s}from"./toDate.js";import{enUS as l}from"./locale/en-US.js";const c=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,m=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,f=/^'([^]*?)'?$/,p=/''/g,u=/[a-zA-Z]/;function k(f,p,k){const w=e(),g=k?.locale??w.locale??l,h=k?.firstWeekContainsDate??k?.locale?.options?.firstWeekContainsDate??w.firstWeekContainsDate??w.locale?.options?.firstWeekContainsDate??1,j=k?.weekStartsOn??k?.locale?.options?.weekStartsOn??w.weekStartsOn??w.locale?.options?.weekStartsOn??0,D=s(f,k?.in);if(!i(D))throw new RangeError("Invalid time value");let v=p.match(m).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,o[t])(e,g.formatLong)}return e})).join("").match(c).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const o=e[0];if("'"===o)return{isToken:!1,value:d(e)};if(t[o])return{isToken:!0,value:e};if(o.match(u))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return{isToken:!1,value:e}}));g.localize.preprocessor&&(v=g.localize.preprocessor(D,v));const T={firstWeekContainsDate:h,weekStartsOn:j,locale:g};return v.map((e=>{if(!e.isToken)return e.value;const o=e.value;(!k?.useAdditionalWeekYearTokens&&r(o)||!k?.useAdditionalDayOfYearTokens&&a(o))&&n(o,p,String(f));return(0,t[o[0]])(D,o,g.localize,T)})).join("")}function d(e){const t=e.match(f);return t?t[1].replace(p,"'"):e}export{k as default,k as format,k as formatDate,t as formatters,o as longFormatters};
//# sourceMappingURL=format.js.map
