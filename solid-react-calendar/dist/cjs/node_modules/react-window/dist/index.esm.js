"use strict";var e=require("../../@babel/runtime/helpers/esm/extends.js"),t=require("../../@babel/runtime/helpers/esm/assertThisInitialized.js"),r=require("../../@babel/runtime/helpers/esm/inheritsLoose.js"),i=require("../../memoize-one/dist/memoize-one.esm.js"),o=require("react"),n="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function l(e){cancelAnimationFrame(e.id)}var s=-1;function a(e){if(void 0===e&&(e=!1),-1===s||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),s=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return s}var c=null;function u(e){if(void 0===e&&(e=!1),null===c||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var i=document.createElement("div"),o=i.style;return o.width="100px",o.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?c="positive-descending":(t.scrollLeft=1,c=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),c}return c}process.env.NODE_ENV;var d=function(e,t){return e},f=null,h=null;function p(s){var c,f=s.getItemOffset,h=s.getEstimatedTotalSize,p=s.getItemSize,v=s.getOffsetForIndexAndAlignment,g=s.getStartIndexForOffset,S=s.getStopIndexForStartIndex,y=s.initInstanceProps,_=s.shouldResetStyleCacheOnItemSizeChange,w=s.validateProps;return c=function(s){function c(e){var r;return(r=s.call(this,e)||this)._instanceProps=y(r.props,t.default(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:t.default(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=i.default((function(e,t,i,o){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:i,visibleStopIndex:o})})),r._callOnScroll=void 0,r._callOnScroll=i.default((function(e,t,i){return r.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:i})})),r._getItemStyle=void 0,r._getItemStyle=function(e){var t,i=r.props,o=i.direction,n=i.itemSize,l=i.layout,s=r._getItemStyleCache(_&&n,_&&l,_&&o);if(s.hasOwnProperty(e))t=s[e];else{var a=f(r.props,e,r._instanceProps),c=p(r.props,e,r._instanceProps),u="horizontal"===o||"horizontal"===l,d="rtl"===o,h=u?a:0;s[e]=t={position:"absolute",left:d?void 0:h,right:d?h:void 0,top:u?0:a,height:u?"100%":c,width:u?c:"100%"}}return t},r._getItemStyleCache=void 0,r._getItemStyleCache=i.default((function(e,t,r){return{}})),r._onScrollHorizontal=function(e){var t=e.currentTarget,i=t.clientWidth,o=t.scrollLeft,n=t.scrollWidth;r.setState((function(e){if(e.scrollOffset===o)return null;var t=r.props.direction,l=o;if("rtl"===t)switch(u()){case"negative":l=-o;break;case"positive-descending":l=n-i-o}return l=Math.max(0,Math.min(l,n-i)),{isScrolling:!0,scrollDirection:e.scrollOffset<l?"forward":"backward",scrollOffset:l,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var t=e.currentTarget,i=t.clientHeight,o=t.scrollHeight,n=t.scrollTop;r.setState((function(e){if(e.scrollOffset===n)return null;var t=Math.max(0,Math.min(n,o-i));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){var e,t,i,o;null!==r._resetIsScrollingTimeoutId&&l(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=(e=r._resetIsScrolling,t=150,i=n(),o={id:requestAnimationFrame((function r(){n()-i>=t?e.call(null):o.id=requestAnimationFrame(r)}))})},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1,null)}))},r}r.default(c,s),c.getDerivedStateFromProps=function(e,t){return m(e,t),w(e),null};var I=c.prototype;return I.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},I.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props,i=r.itemCount,o=r.layout,n=this.state.scrollOffset;e=Math.max(0,Math.min(e,i-1));var l=0;if(this._outerRef){var s=this._outerRef;l="vertical"===o?s.scrollWidth>s.clientWidth?a():0:s.scrollHeight>s.clientHeight?a():0}this.scrollTo(v(this.props,e,t,n,this._instanceProps,l))},I.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,i=e.layout;if("number"==typeof r&&null!=this._outerRef){var o=this._outerRef;"horizontal"===t||"horizontal"===i?o.scrollLeft=r:o.scrollTop=r}this._callPropsCallbacks()},I.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,i=this.state,o=i.scrollOffset;if(i.scrollUpdateWasRequested&&null!=this._outerRef){var n=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(u()){case"negative":n.scrollLeft=-o;break;case"positive-ascending":n.scrollLeft=o;break;default:var l=n.clientWidth,s=n.scrollWidth;n.scrollLeft=s-l-o}else n.scrollLeft=o;else n.scrollTop=o}this._callPropsCallbacks()},I.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&l(this._resetIsScrollingTimeoutId)},I.render=function(){var t=this.props,r=t.children,i=t.className,n=t.direction,l=t.height,s=t.innerRef,a=t.innerElementType,c=t.innerTagName,u=t.itemCount,f=t.itemData,p=t.itemKey,m=void 0===p?d:p,v=t.layout,g=t.outerElementType,S=t.outerTagName,y=t.style,_=t.useIsScrolling,w=t.width,I=this.state.isScrolling,b="horizontal"===n||"horizontal"===v,z=b?this._onScrollHorizontal:this._onScrollVertical,O=this._getRangeToRender(),x=O[0],R=O[1],T=[];if(u>0)for(var C=x;C<=R;C++)T.push(o.createElement(r,{data:f,key:m(C,f),index:C,isScrolling:_?I:void 0,style:this._getItemStyle(C)}));var E=h(this.props,this._instanceProps);return o.createElement(g||S||"div",{className:i,onScroll:z,ref:this._outerRefSetter,style:e.default({position:"relative",height:l,width:w,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:n},y)},o.createElement(a||c||"div",{children:T,ref:s,style:{height:b?"100%":E,pointerEvents:I?"none":void 0,width:b?E:"100%"}}))},I._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],i=e[2],o=e[3];this._callOnItemsRendered(t,r,i,o)}if("function"==typeof this.props.onScroll){var n=this.state,l=n.scrollDirection,s=n.scrollOffset,a=n.scrollUpdateWasRequested;this._callOnScroll(l,s,a)}},I._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,i=this.state,o=i.isScrolling,n=i.scrollDirection,l=i.scrollOffset;if(0===t)return[0,0,0,0];var s=g(this.props,l,this._instanceProps),a=S(this.props,s,l,this._instanceProps),c=o&&"backward"!==n?1:Math.max(1,r),u=o&&"forward"!==n?1:Math.max(1,r);return[Math.max(0,s-c),Math.max(0,Math.min(t-1,a+u)),s,a]},c}(o.PureComponent),c.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},c}"production"!==process.env.NODE_ENV&&"undefined"!=typeof window&&void 0!==window.WeakSet&&(f=new WeakSet,h=new WeakSet);var m=function(e,t){var r=e.children,i=e.direction,o=e.height,n=e.layout,l=e.innerTagName,s=e.outerTagName,a=e.width,c=t.instance;if("production"!==process.env.NODE_ENV){null==l&&null==s||h&&!h.has(c)&&(h.add(c),console.warn("The innerTagName and outerTagName props have been deprecated. Please use the innerElementType and outerElementType props instead."));var u="horizontal"===i||"horizontal"===n;switch(i){case"horizontal":case"vertical":f&&!f.has(c)&&(f.add(c),console.warn('The direction prop should be either "ltr" (default) or "rtl". Please use the layout prop to specify "vertical" (default) or "horizontal" orientation.'));break;case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". "'+i+'" was specified.')}switch(n){case"horizontal":case"vertical":break;default:throw Error('An invalid "layout" prop has been specified. Value should be either "horizontal" or "vertical". "'+n+'" was specified.')}if(null==r)throw Error('An invalid "children" prop has been specified. Value should be a React component. "'+(null===r?"null":typeof r)+'" was specified.');if(u&&"number"!=typeof a)throw Error('An invalid "width" prop has been specified. Horizontal lists must specify a number for width. "'+(null===a?"null":typeof a)+'" was specified.');if(!u&&"number"!=typeof o)throw Error('An invalid "height" prop has been specified. Vertical lists must specify a number for height. "'+(null===o?"null":typeof o)+'" was specified.')}},v=p({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,i,o,n){var l=e.direction,s=e.height,a=e.itemCount,c=e.itemSize,u=e.layout,d=e.width,f="horizontal"===l||"horizontal"===u?d:s,h=Math.max(0,a*c-f),p=Math.min(h,t*c),m=Math.max(0,t*c-f+c+n);switch("smart"===r&&(r=i>=m-f&&i<=p+f?"auto":"center"),r){case"start":return p;case"end":return m;case"center":var v=Math.round(m+(p-m)/2);return v<Math.ceil(f/2)?0:v>h+Math.floor(f/2)?h:v;default:return i>=m&&i<=p?i:i<m?m:p}},getStartIndexForOffset:function(e,t){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/i)))},getStopIndexForStartIndex:function(e,t,r){var i=e.direction,o=e.height,n=e.itemCount,l=e.itemSize,s=e.layout,a=e.width,c=t*l,u="horizontal"===i||"horizontal"===s?a:o,d=Math.ceil((u+r-c)/l);return Math.max(0,Math.min(n-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){var t=e.itemSize;if("production"!==process.env.NODE_ENV&&"number"!=typeof t)throw Error('An invalid "itemSize" prop has been specified. Value should be a number. "'+(null===t?"null":typeof t)+'" was specified.')}});exports.FixedSizeList=v;
//# sourceMappingURL=index.esm.js.map
